{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/constants.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/utils.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["const validConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n}\r\n\r\nconst cardTemplate = document.querySelector('#card-template').content;\r\nconst placesList = document.querySelector('.places__list');\r\n\r\nconst sectionProfile = document.querySelector('.profile');\r\nconst buttonEditProfile = sectionProfile.querySelector('.profile__edit-button');\r\nconst buttonAddNewCard = sectionProfile.querySelector('.profile__add-button');\r\n\r\nconst closePopupButtons = document.querySelectorAll('.popup__close');\r\n\r\nconst popupUpdateAvatar = document.querySelector('.popup_type_update-avatar');\r\n\r\nconst popupEdit = document.querySelector('.popup_type_edit');\r\n\r\nconst popupNewCard = document.querySelector('.popup_type_new-card');\r\n\r\nconst popupConfirm = document.querySelector('.popup_type_confirm');\r\nconst formConfirm = document.forms.confirm;\r\n\r\nconst popupImage = document.querySelector('.popup_type_image');\r\nconst captionPopup = popupImage.querySelector('.popup__caption');\r\nconst imgOfPopup = popupImage.querySelector('.popup__image');\r\n\r\nconst formEditProfile = document.forms[\"edit-profile\"];\r\nconst nameInput = formEditProfile.elements.name;\r\nconst jobInput = formEditProfile.elements.description;\r\n\r\nconst formUpdateAvatar = document.forms[\"update-avatar\"];\r\nconst linkImageInput = formUpdateAvatar.elements['link-img'];\r\n\r\nconst formNewPlace = document.forms[\"new-place\"];\r\nconst namePlaceInput = formNewPlace.elements['place-name'];\r\nconst linkInput = formNewPlace.elements.link;\r\n\r\nconst profileImage = document.querySelector('.profile__image');\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileJob = document.querySelector('.profile__description');\r\n\r\nexport {\r\nvalidConfig,\r\ncardTemplate, // in card.js\r\nplacesList,\r\nbuttonEditProfile,\r\nbuttonAddNewCard,\r\nclosePopupButtons,\r\npopupUpdateAvatar,\r\npopupEdit,\r\npopupNewCard,\r\npopupConfirm,\r\nformConfirm, // in card.js\r\npopupImage,\r\ncaptionPopup,\r\nimgOfPopup,\r\nformEditProfile,\r\nnameInput,\r\njobInput,\r\nformUpdateAvatar,\r\nlinkImageInput,\r\nformNewPlace,\r\nnamePlaceInput,\r\nlinkInput,\r\nprofileImage,\r\nprofileTitle,\r\nprofileJob,\r\n}\r\n","function openModal (popup) {\r\n  popup.classList.add('popup_is-animated');\r\n  setTimeout(()=>{\r\n    popup.classList.add('popup_is-opened');\r\n  }, 1);\r\n  popup.addEventListener('click', closeOverlayPopup);\r\n  document.addEventListener('keydown', closeEscPopup);\r\n}\r\n\r\nfunction closeEscPopup (evt) {\r\n  if (evt.key === 'Escape') {\r\n    const popupIsOpened = document.querySelector('.popup_is-opened');\r\n    closeModal(popupIsOpened);\r\n  }\r\n}\r\n\r\nfunction closeOverlayPopup (evt) {\r\n  if (evt.target === evt.currentTarget) {\r\n    closeModal(evt.currentTarget);\r\n  }\r\n}\r\n\r\nfunction resetForm (popup) {\r\n  const formElement = popup.querySelector('.popup__form');\r\n  formElement.reset();\r\n}\r\n\r\nfunction closeModal (popup) {\r\n  popup.classList.remove('popup_is-opened');\r\n  popup.removeEventListener('click', closeOverlayPopup);\r\n  document.removeEventListener('keydown', closeEscPopup);\r\n  resetForm (popup)\r\n}\r\n\r\nexport {openModal, closeModal};\r\n\r\n","import {closeModal} from './modal.js';\r\nimport {showError} from './index.js';\r\n\r\n//функция проверки ответа\r\nexport function checkResponse (res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\n//универсальная функция запроса fetch с проверкой ответа \r\nexport function request(url, option) {\r\n  return fetch (url, option).then(checkResponse) \r\n}\r\n\r\n// можно сделать универсальную функцию управления текстом кнопки с 3 и 4 необязательными аргументами\r\nexport function renderLoading(isLoading, button, buttonText='Сохранить', loadingText='Сохранение...') {\r\n  if (isLoading) {\r\n    button.textContent = loadingText\r\n  } else {\r\n    button.textContent = buttonText\r\n  }\r\n}\r\n\r\n// можно сделать универсальную функцию, которая принимает функцию запроса, объект события и текст во время загрузки\r\nexport function handleSubmit(request, evt, loadingText = \"Сохранение...\") {\r\n  // всегда нужно предотвращать перезагрузку формы при сабмите\r\n  evt.preventDefault();\r\n   // универсально получаем кнопку сабмита из `evt`\r\n  const submitButton = evt.submitter;\r\n   // записываем начальный текст кнопки до вызова запроса\r\n  const initialText = submitButton.textContent;\r\n   // изменяем текст кнопки до вызова запроса\r\n  renderLoading(true, submitButton, initialText, loadingText);\r\n  request()\r\n    .then(() => {\r\n       // любую форму нужно очищать после успешного ответа от сервера\r\n       // а также `reset` может запустить деактивацию кнопки сабмита (смотрите в `validate.js`)\r\n      evt.target.reset();\r\n      closeModal(evt.target.closest('.popup'));\r\n    })\r\n    .catch(console.error)\r\n     // в каждом запросе в `finally` нужно возвращать обратно начальный текст кнопки\r\n    .finally(() => {\r\n      renderLoading(false, submitButton, initialText);\r\n    });\r\n}","import {request} from './utils.js';\r\n\r\nconst config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-7',\r\n  headers: {\r\n    authorization: 'b27457ff-8e1d-494d-8bc0-af82cbd7f253',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}\r\n\r\n//Promise запроса данных пользователя \r\nfunction getUser () {\r\n  return request(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers\r\n  })\r\n}\r\n\r\n//Promise запроса карточек \r\nfunction getInitialCards () {\r\n  return request(`${config.baseUrl}/cards`, {\r\n    headers: config.headers\r\n  })\r\n}\r\n\r\n//Функция отправки запроса на обновление данных о пользователе на сервере\r\nfunction editeProfileServer (nameUser, aboutUser) {\r\n  return request(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: `${nameUser}`,\r\n      about: `${aboutUser}`\r\n    })\r\n  })\r\n}\r\n\r\n//Функция отправки запроса на добавление новой карточки на сервер\r\nfunction addNewPlaceServer (namePlace, link) {\r\n  return request(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: `${namePlace}`,\r\n      link: `${link}`\r\n    })\r\n  })\r\n}\r\n\r\n//Функция отправки запроса на удаление карточки на сервер\r\nfunction deleteCardServer (cardId) {\r\n  return request(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  })\r\n}\r\n\r\n//Функция отправки запроса на добавление like на сервер\r\nfunction addLikeServer (card) {\r\n  return request(`${config.baseUrl}/cards/likes/${card['_id']}`, {\r\n    method: 'PUT',\r\n    headers: config.headers,\r\n  })\r\n}\r\n\r\n//Функция отправки запроса на удаление like на сервер\r\nfunction deleteLikeServer (card) {\r\n  return request(`${config.baseUrl}/cards/likes/${card['_id']}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  })\r\n}\r\n\r\n//Функция отправки запроса на смену аватара на сервер\r\nfunction updateAvatarServer (valuelinkImage) {\r\n    return request(`${config.baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: config.headers,\r\n      body: JSON.stringify({\r\n        avatar: `${valuelinkImage}`\r\n      })\r\n    })\r\n}\r\n\r\n//Функция, проверяющая, что ссылка на картинку\r\nfunction validateLinkImg (valuelinkImage) {\r\n  return fetch(`https://corsproxy.org/?${valuelinkImage}`, {\r\n    method: 'HEAD'\r\n  })\r\n  .then ((res) => {\r\n    if (res.ok) {\r\n      return res.headers\r\n    }\r\n  return Promise.reject(`Запрос на изменение аватара не выполнен, ошибка: ${res.status}`);\r\n  })\r\n  .then ((headers) => {\r\n    if (headers.get('Content-type').includes('image')) {\r\n      return updateAvatarServer (valuelinkImage)\r\n    }\r\n  return Promise.reject(`Ссылка не на изображение, ошибка: ${res.status}`);\r\n  })\r\n}\r\n\r\nexport {\r\n  getUser, \r\n  getInitialCards, \r\n  editeProfileServer, \r\n  addNewPlaceServer, \r\n  deleteCardServer, \r\n  addLikeServer, \r\n  deleteLikeServer,\r\n  updateAvatarServer,\r\n  validateLinkImg\r\n}","import {cardTemplate} from './constants.js';\r\nimport {addLikeServer, deleteLikeServer} from './api.js';\r\n\r\nfunction delCard (cardItem) {\r\n  cardItem.remove();\r\n}\r\n\r\nfunction likeCard (bttnLike) {\r\n  bttnLike.classList.toggle('card__like-button_is-active');\r\n}\r\n\r\nfunction getCardTemplate (templateCard) {\r\n  return templateCard.querySelector('.places__item').cloneNode(true);\r\n}\r\n\r\nfunction deletebuttonCardDel (cardUserId, userId, buttonCardDel) {\r\n  if (cardUserId !== userId) {\r\n    buttonCardDel.remove()\r\n  }\r\n}\r\n\r\nfunction setCurrentStatusMyLike (card, userId, buttonlikeCard) {\r\n  if (checkMyLike (card, userId)) {\r\n    buttonlikeCard.classList.add('card__like-button_is-active');\r\n  } else {\r\n    buttonlikeCard.classList.remove('card__like-button_is-active');\r\n  }\r\n}\r\n\r\nfunction checkMyLike (card, userId) {\r\n  const likes = card.likes;\r\n  return likes.some ((like) => {\r\n    if (like['_id'] === userId) {\r\n      return true;\r\n    }\r\n    return false;\r\n  })\r\n}\r\n\r\nfunction changeStatusMyLike (likeConfig) {\r\n  const {card, buttonlikeCard, likeCounter, likeCard} = likeConfig;\r\n  if (buttonlikeCard.classList.contains('card__like-button_is-active')) {\r\n    deleteLikeServer (card)\r\n      .then ((updatedСard) => {\r\n        likeCard(buttonlikeCard);\r\n        likeCounter.textContent = updatedСard.likes.length;\r\n      })\r\n      .catch(console.error)\r\n  } else {\r\n    addLikeServer (card)\r\n      .then ((updatedСard) => {\r\n        likeCard(buttonlikeCard);\r\n        likeCounter.textContent = updatedСard.likes.length;\r\n      })\r\n      .catch(console.error)\r\n    }\r\n}\r\n\r\nfunction createCard(cardConfig) {\r\n  const {card, userId, openPopupImg, likeCard, handleDelete} = cardConfig;\r\n  const cardElement = getCardTemplate(cardTemplate);\r\n  const cardTitle = cardElement.querySelector('.card__title');\r\n  const imgCard = cardElement.querySelector('.card__image');\r\n  const buttonCardDel = cardElement.querySelector('.card__delete-button');\r\n  const buttonlikeCard = cardElement.querySelector('.card__like-button');\r\n  const likeCounter = cardElement.querySelector('.card__like-counter');\r\n  const idUserCreateCard = card.owner['_id'];\r\n  const counterLikes = card.likes.length;\r\n\r\n  cardElement.id = card['_id'];\r\n\r\n  cardTitle.textContent = `${card.name}`;\r\n  likeCounter.textContent = `${counterLikes}`;\r\n  imgCard.src = `${card.link}`;\r\n  imgCard.alt = `Фото: ${card.name}`;\r\n  imgCard.addEventListener('click', () => {\r\n    openPopupImg(card.name, card.link);\r\n  });\r\n\r\n  buttonCardDel.addEventListener('click', handleDelete)\r\n  \r\n  buttonlikeCard.addEventListener('click', (evt) => {\r\n    changeStatusMyLike ({card, buttonlikeCard: evt.target, likeCounter, likeCard});\r\n  });\r\n\r\n  deletebuttonCardDel (idUserCreateCard, userId, buttonCardDel); //Удалили иконку кнопки удаления на карточке\r\n  setCurrentStatusMyLike (card, userId, buttonlikeCard) //Установили текущий статус моего лайка\r\n\r\n  return cardElement;\r\n}\r\n\r\nexport {createCard, delCard, likeCard};","const showInputError = (formElement, inputElement, errorConfig, errorMessage) => {\r\n  const {inputErrorClass, errorClass} = errorConfig;\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(errorClass);\r\n};\r\n\r\nconst hideInputError = (formElement, errorConfig, inputElement) => {\r\n  const {inputErrorClass, errorClass} = errorConfig;\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(inputErrorClass);\r\n  errorElement.classList.remove(errorClass);\r\n  errorElement.textContent = '';\r\n};\r\n\r\nconst checkInputValidityPattern = (inputElement) => {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n      inputElement.setCustomValidity('');\r\n  }\r\n}\r\n\r\nconst checkInputValidity = (formElement, inputElement, errorConfig) => {\r\n  checkInputValidityPattern(inputElement);\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, errorConfig, inputElement.validationMessage);\r\n  } else {\r\n    hideInputError(formElement, errorConfig, inputElement);\r\n  }\r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !(inputElement.validity.valid);\r\n  });\r\n}\r\n\r\nfunction disableButton (submitButton, inactiveButtonClass) {\r\n  submitButton.classList.add(inactiveButtonClass);\r\n  submitButton.setAttribute('disabled', true);\r\n}\r\n\r\nconst toggleButtonState = (inputList, submitButton, inactiveButtonClass) => {\r\n  if (hasInvalidInput(inputList)) {\r\n    disableButton (submitButton, inactiveButtonClass);\r\n  } else {\r\n      submitButton.classList.remove(inactiveButtonClass);\r\n      submitButton.removeAttribute('disabled', true);\r\n  }\r\n}\r\n\r\nconst setEventListeners = (formElement, formConfig) => {\r\n  const {inputSelector, submitButtonSelector, inactiveButtonClass, ...errorConfig} = formConfig;\r\n  const inputList = Array.from(formElement.querySelectorAll(inputSelector));\r\n  const submitButton = formElement.querySelector(submitButtonSelector);\r\n  toggleButtonState(inputList, submitButton, inactiveButtonClass);\r\n  formElement.addEventListener('reset', () => {\r\n    disableButton(submitButton, inactiveButtonClass)\r\n  });\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener('input', function () {\r\n      checkInputValidity(formElement, inputElement, errorConfig);\r\n      toggleButtonState(inputList, submitButton, inactiveButtonClass);\r\n    });\r\n  });\r\n};\r\n\r\nexport const enableValidation = (validationConfig) => {\r\n  const {formSelector, ...formConfig} = validationConfig;\r\n  const formList = Array.from(document.querySelectorAll(formSelector));\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement, formConfig);\r\n  });\r\n};\r\n\r\nexport function clearValidation (formElement, validationConfig) {\r\n  const {submitButtonSelector, inputSelector, inactiveButtonClass, ...errorConfig} = validationConfig;\r\n  const submitButton = formElement.querySelector(submitButtonSelector);\r\n  const inputList = Array.from(formElement.querySelectorAll(inputSelector));\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, errorConfig, inputElement)\r\n    inputElement.setCustomValidity('');\r\n  });\r\n  toggleButtonState(inputList, submitButton, inactiveButtonClass);\r\n}\r\n\r\n","import '../pages/index.css'; // импорт главного файла стилей\r\nimport {createCard, delCard, likeCard} from './card.js';\r\nimport {openModal, closeModal} from './modal.js';\r\nimport {enableValidation, clearValidation} from './validation.js';\r\nimport {getUser, getInitialCards, editeProfileServer, addNewPlaceServer, deleteCardServer,validateLinkImg} from './api.js';\r\nimport {handleSubmit} from './utils.js';\r\nimport {\r\n  validConfig,\r\n  placesList,\r\n  buttonEditProfile,\r\n  buttonAddNewCard,\r\n  popupUpdateAvatar,\r\n  closePopupButtons,\r\n  popupEdit,\r\n  popupNewCard,\r\n  popupConfirm,\r\n  formConfirm,\r\n  popupImage,\r\n  captionPopup,\r\n  imgOfPopup,\r\n  formEditProfile,\r\n  nameInput,\r\n  jobInput,\r\n  formUpdateAvatar,\r\n  linkImageInput,\r\n  formNewPlace,\r\n  namePlaceInput,\r\n  linkInput,\r\n  profileImage,\r\n  profileTitle,\r\n  profileJob,\r\n  } from './constants.js'\r\n\r\nfunction handleDelete (evt) {\r\n  const cardElement = evt.target.closest('.card');\r\n  popupConfirm.dataset.cardId = cardElement.id;\r\n  openModal (popupConfirm); \r\n}\r\n\r\n//Обработчик открытия popup с img - начало\r\nfunction openPopupImg (cardName, cardLink) {\r\n  imgOfPopup.src = cardLink;\r\n  imgOfPopup.alt = cardName;\r\n  captionPopup.textContent = cardName;\r\n  openModal(popupImage);\r\n}\r\n\r\n//Активация валидации\r\nenableValidation(validConfig);\r\n\r\n//Открытие и редактирование профиля - начало\r\nbuttonEditProfile.addEventListener('click', () => {\r\n  nameInput.value = profileTitle.textContent;\r\n  jobInput.value = profileJob.textContent;\r\n  clearValidation (formEditProfile, validConfig);\r\n  openModal(popupEdit); \r\n});\r\nfunction handleProfileFormSubmit(evt) {\r\n  const valueName = nameInput.value;\r\n  const valueJob = jobInput.value;\r\n  // создаем функцию, которая возвращает промис, так как любой запрос возвращает его \r\n  function makeRequest() {\r\n    // return позволяет потом дальше продолжать цепочку `then, catch, finally`\r\n    return editeProfileServer (valueName, valueJob).then((userData) => {\r\n      profileTitle.textContent = userData.name;\r\n      profileJob.textContent = userData.about;\r\n    });\r\n  }\r\n  // вызываем универсальную функцию, передавая в нее запрос, событие и текст изменения кнопки (если нужен другой, а не `\"Сохранение...\"`)\r\n  handleSubmit(makeRequest, evt);\r\n}\r\nformEditProfile.addEventListener('submit', handleProfileFormSubmit);\r\n\r\n//Обновление аватара - начало\r\nprofileImage.addEventListener('click', () => {\r\n  openModal(popupUpdateAvatar);\r\n});\r\nfunction handleUpdateAvatarFormSubmit(evt) {\r\n  const valuelinkImage = linkImageInput.value;\r\n  function makeRequest () {\r\n    return validateLinkImg (valuelinkImage).then ((newLinkImg) => {\r\n      profileImage.style = `background-image: url(${newLinkImg.avatar})`;\r\n    })\r\n  }\r\n  handleSubmit(makeRequest, evt)\r\n}\r\nformUpdateAvatar.addEventListener('submit', handleUpdateAvatarFormSubmit);\r\n\r\n//Открытие и добавление новой карточки - начало\r\nbuttonAddNewCard.addEventListener('click', () => {\r\n  openModal(popupNewCard);\r\n});\r\nfunction handleNewPlaceFormSubmit(evt) {\r\n  const valueNamePlace = namePlaceInput.value;\r\n  const valueLink = linkInput.value;\r\n  function makeRequest () {\r\n    return addNewPlaceServer (valueNamePlace, valueLink).then((newCard) => {\r\n      placesList.prepend(createCard({card:newCard, userId:newCard.owner['_id'], openPopupImg, likeCard, handleDelete}));\r\n    }) \r\n  }\r\n  handleSubmit(makeRequest, evt)\r\n}\r\nformNewPlace.addEventListener('submit', handleNewPlaceFormSubmit);\r\n\r\n//Подтверждение удаления карточки - начало\r\nfunction handleConfirmFormSubmit(evt) {\r\n  const loadingText = \"Удаление...\"\r\n  const cardId = popupConfirm.dataset.cardId;\r\n  const card = placesList.querySelector(`[id=\"${cardId}\"]`);\r\n  function makeRequest () {\r\n    return deleteCardServer(cardId).then (() => {\r\n      delCard(card);\r\n    })\r\n  }\r\n  handleSubmit(makeRequest, evt, loadingText);\r\n}\r\nformConfirm.addEventListener('submit', handleConfirmFormSubmit);\r\n\r\n//Закрытие Popup по кнопке \"X\"- начало\r\nfunction closePopup (evt) {\r\n  const popupElement = evt.target.closest('.popup');\r\n  const formElement = popupElement.querySelector('.popup__form');\r\n  closeModal(popupElement);\r\n  clearValidation (formElement, validConfig);\r\n}\r\n\r\nclosePopupButtons.forEach((closePopupButton) => {\r\n  closePopupButton.addEventListener('click', closePopup);\r\n});\r\n\r\n//Загрузка карточек и данных пользователя с сервера при открытии страницы - начало\r\nPromise.all([getUser(), getInitialCards()])\r\n  .then (([user, cards]) => {\r\n    profileImage.style = `background-image: url(${user.avatar})`;\r\n    profileTitle.textContent = `${user.name}`;\r\n    profileJob.textContent = `${user.about}`\r\n\r\n    cards.forEach( card => {\r\n      const cardElement = createCard({card, userId:user['_id'], openPopupImg, likeCard, handleDelete});\r\n      \r\n      placesList.append(cardElement)\r\n      \r\n    })\r\n  })\r\n  .catch(console.error)"],"names":["validConfig","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","cardTemplate","document","querySelector","content","placesList","sectionProfile","buttonEditProfile","buttonAddNewCard","closePopupButtons","querySelectorAll","popupUpdateAvatar","popupEdit","popupNewCard","popupConfirm","formConfirm","forms","confirm","popupImage","captionPopup","imgOfPopup","formEditProfile","nameInput","elements","name","jobInput","description","formUpdateAvatar","linkImageInput","formNewPlace","namePlaceInput","linkInput","link","profileImage","profileTitle","profileJob","openModal","popup","classList","add","setTimeout","addEventListener","closeOverlayPopup","closeEscPopup","evt","key","closeModal","target","currentTarget","remove","removeEventListener","reset","resetForm","checkResponse","res","ok","json","Promise","reject","concat","status","request","url","option","fetch","then","renderLoading","isLoading","button","buttonText","arguments","length","undefined","loadingText","textContent","handleSubmit","preventDefault","submitButton","submitter","initialText","closest","catch","console","error","finally","config","baseUrl","headers","authorization","likeCard","bttnLike","toggle","createCard","cardConfig","card","userId","openPopupImg","handleDelete","cardElement","cloneNode","cardTitle","imgCard","buttonCardDel","buttonlikeCard","likeCounter","idUserCreateCard","owner","counterLikes","likes","id","src","alt","likeConfig","contains","method","deleteLikeServer","updatedСard","addLikeServer","changeStatusMyLike","cardUserId","deletebuttonCardDel","some","like","checkMyLike","setCurrentStatusMyLike","hideInputError","formElement","errorConfig","inputElement","errorElement","disableButton","setAttribute","validationConfig","formConfig","toggleButtonState","inputList","validity","valid","hasInvalidInput","removeAttribute","clearValidation","_objectWithoutProperties","_excluded3","Array","from","forEach","setCustomValidity","dataset","cardId","cardName","cardLink","closePopup","popupElement","_excluded","patternMismatch","errorMessage","checkInputValidityPattern","showInputError","validationMessage","checkInputValidity","setEventListeners","value","valueName","valueJob","nameUser","aboutUser","body","JSON","stringify","about","userData","valuelinkImage","get","includes","avatar","updateAvatarServer","validateLinkImg","newLinkImg","style","valueNamePlace","valueLink","namePlace","newCard","prepend","deleteCardServer","closePopupButton","all","_ref","_ref2","user","cards","append"],"sourceRoot":""}